# ComunidadePsi Backend Dockerfile

FROM node:18-alpine

WORKDIR /app

# Copy root and workspaces
COPY package.json package-lock.json ./
COPY apps/api ./apps/api
COPY packages/shared ./packages/shared

# Install dependencies
RUN npm ci

# Build shared package
RUN npm run build -w packages/shared

# Expose API port
EXPOSE 5000

# Default command
CMD ["npm", "run", "dev", "-w", "apps/api"]
